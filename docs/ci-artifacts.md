# CI Artifacts Documentation

This document provides comprehensive information about all CI-generated artifacts, their purposes, storage locations, and usage instructions for the EchoTune AI project.

## 📋 Overview

The EchoTune AI CI/CD pipeline generates various artifacts for quality assurance, monitoring, and documentation purposes. All artifacts follow a structured naming convention and retention policy to maintain organization and efficiency.

## 🏗️ Artifact Categories

### 1. Quality Assurance Artifacts

#### Software Bill of Materials (SBOM)
- **Generated by:** `.github/workflows/sbom.yml`
- **Location:** `reports/sbom.json` (CycloneDX format), `reports/sbom-spdx.json` (SPDX format)
- **Purpose:** Comprehensive inventory of all software components and dependencies
- **Retention:** 90 days
- **Schedule:** On dependency changes, weekly deep scans
- **Contents:**
  - Complete dependency tree with versions
  - Security vulnerability analysis
  - License information
  - Supply chain risk assessment
  - Component metadata and relationships

#### Coverage Reports
- **Generated by:** `.github/workflows/hardened-ci.yml`
- **Location:** `reports/coverage/`
- **Purpose:** Code coverage analysis with multiple metrics
- **Formats:** HTML, JSON, XML, LCOV
- **Metrics:**
  - Line coverage
  - Branch coverage
  - Function coverage
  - Statement coverage
  - Condition coverage

#### Security Scan Results
- **Generated by:** `scripts/security-scanner.js`
- **Location:** `reports/security/`
- **Purpose:** Vulnerability detection and security compliance
- **Formats:** JSON, SARIF, Markdown
- **Contents:**
  - Dependency vulnerabilities
  - Secret detection results
  - Security policy compliance
  - Risk assessment scores

### 2. Performance & Monitoring Artifacts

#### Performance Baselines
- **Generated by:** `scripts/performance-benchmark.js`
- **Location:** `reports/perf-baseline.json`
- **Purpose:** Performance benchmarking and trend analysis
- **Retention:** 1 year for historical trending
- **Contents:**
  - Startup time metrics
  - Memory usage profiles
  - API response times (P50, P95, P99)
  - Throughput measurements
  - Frontend performance scores
  - Database query performance
  - MCP server coordination overhead

#### MCP Health Reports
- **Generated by:** `.github/workflows/mcp-health.yml`
- **Location:** `reports/mcp-health.md`, `reports/mcp-health.json`
- **Purpose:** MCP server ecosystem health monitoring
- **Schedule:** Every 4 hours with weekly deep validation
- **Contents:**
  - Server availability status
  - Response time monitoring
  - Health check results
  - Registry analysis
  - Performance metrics
  - Recommendations for improvements

#### Code Quality Metrics
- **Generated by:** `.github/workflows/redundancy-audit.yml`
- **Location:** `reports/redundancy-audit.md`, `reports/redundancy-summary.json`
- **Purpose:** Code duplication and quality analysis
- **Contents:**
  - Duplication percentage
  - Quality scores
  - Complexity metrics
  - Refactoring recommendations
  - Language-specific analysis

### 3. Build & Deployment Artifacts

#### Docker Images
- **Generated by:** `.github/workflows/hardened-ci.yml`
- **Registry:** GitHub Container Registry (ghcr.io)
- **Tags:** `latest`, `v{version}`, `{commit-sha}`
- **Purpose:** Production-ready containerized applications
- **Security:** Multi-stage builds, vulnerability scanning

#### Build Artifacts
- **Generated by:** Build workflows
- **Location:** `dist/`, `build/`
- **Purpose:** Optimized production assets
- **Contents:**
  - Minified JavaScript bundles
  - CSS assets
  - Static resources
  - Source maps (development)

### 4. Documentation Artifacts

#### API Documentation
- **Generated by:** Documentation workflows
- **Location:** `docs/api/`
- **Format:** OpenAPI 3.0 specification
- **Purpose:** Interactive API documentation

#### Architecture Diagrams
- **Generated by:** Documentation workflows
- **Location:** `docs/diagrams/`
- **Format:** Mermaid, PlantUML, PNG
- **Purpose:** Visual system architecture documentation

## 📁 Artifact Storage Structure

```
reports/
├── sbom.json                    # CycloneDX SBOM
├── sbom-spdx.json              # SPDX SBOM
├── vulnerabilities.json         # Security scan results
├── perf-baseline.json          # Performance benchmarks
├── mcp-health.md               # MCP health report (Markdown)
├── mcp-health.json             # MCP health report (JSON)
├── redundancy-audit.md         # Code quality audit
├── redundancy-summary.json     # Code quality metrics
├── coverage/
│   ├── lcov.info              # LCOV coverage data
│   ├── coverage-summary.json  # Coverage metrics
│   └── html/                  # HTML coverage report
├── security/
│   ├── sarif-report.json      # SARIF security results
│   ├── dependency-audit.json  # Dependency vulnerabilities
│   └── secrets-scan.json      # Secret detection results
├── performance/
│   ├── lighthouse.json        # Lighthouse audit results
│   ├── load-test.json         # Load testing results
│   └── benchmark-history.json # Historical performance data
└── quality/
    ├── lint-results.json      # Linting results
    ├── complexity-analysis.json # Code complexity metrics
    └── technical-debt.json    # Technical debt assessment
```

## 🔄 Artifact Lifecycle

### Generation Triggers

1. **Push Events:** Main branch pushes trigger full artifact generation
2. **Pull Requests:** Generate subset of artifacts for validation
3. **Scheduled Runs:** Weekly comprehensive analysis
4. **Manual Triggers:** On-demand artifact generation via workflow dispatch
5. **Dependency Changes:** SBOM and security scanning on package updates

### Retention Policies

| Artifact Type | Retention Period | Cleanup Policy |
|---------------|------------------|----------------|
| SBOM Reports | 90 days | Auto-cleanup via workflow |
| Performance Data | 1 year | Historical trending |
| Security Scans | 90 days | Compliance requirements |
| Code Quality | 60 days | Development cycles |
| Build Artifacts | 30 days | Release management |
| Health Reports | 30 days | Monitoring purposes |
| Coverage Reports | 60 days | Quality tracking |

### Versioning Strategy

- **Semantic Versioning:** All artifacts include version metadata
- **Build Numbers:** Unique build identifiers for traceability
- **Git Commit SHA:** Full commit hash for exact source correlation
- **Timestamp:** ISO 8601 timestamps for chronological ordering

## 🔍 Artifact Access & Usage

### GitHub Actions Artifacts

Artifacts are available through multiple channels:

1. **Workflow Run Page:** Direct download from GitHub Actions UI
2. **API Access:** GitHub REST API for programmatic access
3. **CLI Tools:** GitHub CLI (`gh run download`)
4. **Repository Files:** Committed artifacts in `reports/` directory

### API Access Examples

```bash
# Download artifacts using GitHub CLI
gh run download [run-id] --name sbom-reports

# List available artifacts
gh api repos/:owner/:repo/actions/artifacts

# Download specific artifact
gh api repos/:owner/:repo/actions/artifacts/:artifact_id/zip
```

### Programmatic Access

```javascript
// Access artifacts via GitHub API
const { Octokit } = require('@octokit/rest');
const octokit = new Octokit({ auth: process.env.GITHUB_TOKEN });

async function downloadArtifact(artifactName) {
  const { data: artifacts } = await octokit.rest.actions.listArtifactsForRepo({
    owner: 'dzp5103',
    repo: 'Spotify-echo'
  });
  
  const artifact = artifacts.artifacts.find(a => a.name === artifactName);
  if (artifact) {
    const download = await octokit.rest.actions.downloadArtifact({
      owner: 'dzp5103',
      repo: 'Spotify-echo',
      artifact_id: artifact.id,
      archive_format: 'zip'
    });
    return download.data;
  }
}
```

## 📊 Quality Gates & Thresholds

### Performance Thresholds

- **Startup Time:** < 1000ms (cold start)
- **Memory Usage:** < 200MB (peak)
- **API Response (P99):** < 2000ms
- **Throughput:** > 100 req/s
- **Lighthouse Performance:** > 80

### Security Thresholds

- **Critical Vulnerabilities:** 0 allowed
- **High Vulnerabilities:** < 5 allowed
- **CVSS Score:** < 7.0 average
- **License Compliance:** 100% approved licenses

### Code Quality Thresholds

- **Coverage:** > 70% minimum
- **Duplication:** < 15% maximum
- **Complexity:** Cyclomatic complexity < 10
- **Technical Debt:** < 10% of total code

## 🚨 Monitoring & Alerting

### Automated Alerts

The CI system generates automatic alerts for:

- **Security Issues:** Critical vulnerabilities detected
- **Performance Degradation:** Metrics below thresholds
- **Quality Gates:** Failed quality checks
- **System Health:** MCP server failures

### Integration Points

- **GitHub Issues:** Auto-created for critical findings
- **PR Comments:** Quality summaries on pull requests
- **Status Checks:** Pass/fail indicators on commits
- **Notifications:** Team notifications via configured channels

## 🛠️ Troubleshooting

### Common Issues

1. **Missing Artifacts:** Check workflow permissions and paths
2. **Large Artifacts:** Review retention policies and compression
3. **Access Denied:** Verify authentication and repository permissions
4. **Stale Data:** Ensure workflows are running on schedule

### Debugging Commands

```bash
# Check workflow status
gh workflow view hardened-ci.yml

# List recent runs
gh run list --workflow=hardened-ci.yml

# View run logs
gh run view [run-id] --log

# Download all artifacts from latest run
gh run download --name "*reports*"
```

## 📝 Maintenance

### Regular Tasks

- **Weekly:** Review artifact storage usage
- **Monthly:** Update retention policies
- **Quarterly:** Audit artifact access patterns
- **Annually:** Review and optimize artifact structure

### Performance Optimization

- **Compression:** Use appropriate compression for large artifacts
- **Parallel Generation:** Leverage matrix builds for efficiency
- **Incremental Updates:** Only regenerate changed artifacts
- **Caching:** Implement intelligent caching strategies

## 🔗 Related Documentation

- [Hardened CI/CD Pipeline Documentation](./HARDENED_CI_CD_PIPELINE.md)
- [MCP Integration Guide](./MCP_INTEGRATION.md)
- [Security Documentation](../SECURITY.md)
- [Performance Testing Guide](./guides/performance-testing.md)
- [Quality Assurance Processes](./guides/quality-assurance.md)

---

**Note:** This documentation is automatically updated by CI workflows. For manual updates, please ensure consistency with the actual artifact generation processes.

*Last Updated: 2024-12-27 | Version: 4.0 | Generated by: ci-artifacts-documentation-v4.0*